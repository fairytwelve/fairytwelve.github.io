<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>python文件读写 | fairy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="主要内容：文件读写和数据库使用">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="python文件读写">
<meta property="og:url" content="http://yoursite.com/2019/09/26/python文件读写/index.html">
<meta property="og:site_name" content="fairy">
<meta property="og:description" content="主要内容：文件读写和数据库使用">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-11-05T14:51:38.679Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python文件读写">
<meta name="twitter:description" content="主要内容：文件读写和数据库使用">
  
    <link rel="alternate" href="/atom.xml" title="fairy" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.webp">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlight.css">
  <script>
  let antiquityStorage = window.sessionStorage.getItem('antiquitySessionStorage');
  if (antiquityStorage == '' || antiquityStorage == null) {
    var antiquityLoader = '<div id="loaderbox"><div class="loader"><div class="load-roll"><div class="load-top"></div><div class="load-right"></div><div class="load-bottom"></div></div></div></div>';
    document.write(antiquityLoader);
    document.body.style.overflow = 'hidden'
  }
  </script>
</head>
</html>
<body>
  <div id="fullpage" class="mobile-nav-left">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-left">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-left">
        <section id="main"><article id="post-python文件读写" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      python文件读写
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/09/26/python文件读写/" class="article-date">
  <time datetime="2019-09-26T12:53:04.000Z" itemprop="datePublished">2019-09-26</time>
</a>
    
    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p>主要内容：文件读写和数据库使用</p>
<a id="more"></a>



<h1 id="1-python对文件的读写操作"><a href="#1-python对文件的读写操作" class="headerlink" title="1.python对文件的读写操作"></a>1.python对文件的读写操作</h1><p>python中的文件操作一般通过内置的open函数完成，这个函数很像C语言中的fopen，通过open函数，我们可以得到一个file object</p>
<p>python提供另一个内置函数read（）：读取file object中的内容操作</p>
<p>python提供另一个内置函数write（）：用于对内容进行编辑（读写）操作</p>
<p>在文件操作完成以后，一定要关闭文件close（）</p>
<h2 id="1-1-文件的读操作"><a href="#1-1-文件的读操作" class="headerlink" title="1.1 文件的读操作"></a>1.1 文件的读操作</h2><p>使用方法：open（‘文件的路径’）</p>
<p>文件的路径：相对路径和绝对路径</p>
<p>open的功能很强大，可以打开的文件类型有很多，包括.txt/.ini/.html/.xml</p>
<p><code>open（）</code></p>
<p><code>try：</code></p>
<p>  <code>read（）</code></p>
<p><code>finally：</code></p>
<p>  <code>close（）</code></p>
<p>以上是读操作的步骤和要求，<strong>注意事项</strong>：</p>
<p>1.不能在open时，就try语句，因为文件如果一打开就出错，close就不知道怎么办了。</p>
<p>2.使用open打开文件后，一定要记得调用close关闭。如果不关闭，可能造成文件被占用而无法被一个需要open操作所使用</p>
<p>3.文件read（）是可以设置读权限的，如只读，如强制为二进制文件</p>
<p>4.可以改文件的打开权限，r或者rb</p>
<h2 id="1-2-文件的写操作"><a href="#1-2-文件的写操作" class="headerlink" title="1.2 文件的写操作"></a>1.2 文件的写操作</h2><p>函数<strong>write</strong></p>
<p><code>open（）</code></p>
<p><code>try：</code></p>
<p>  <code>write（）</code></p>
<p><code>finally：</code></p>
<p>  <code>close（）</code></p>
<p>demo：把用户输入的值写入指定的文件</p>
<p>注意事项：1打开文件，应该具有写模式的参数打开文件</p>
<p>参数不同，写入文件的效果不同</p>
<p>writelines（）写入多行，要比write（）一次性写入要高</p>
<p>1.3 关于文件的打开模式</p>
<h1 id="2-python对sqlite数据库系统的增删改查"><a href="#2-python对sqlite数据库系统的增删改查" class="headerlink" title="2.python对sqlite数据库系统的增删改查"></a>2.python对sqlite数据库系统的增删改查</h1><p>数据库：关系型数据库-DBMS</p>
<p>本例如何利用Python完成对内置（Windows/linux/android、·····）数据库系统的操作–sqlite</p>
<p>一款数据库管理工具：SQLite Expert Professional</p>
<p>Sqlite，目前开发到sqlite3.x</p>
<p>如果Python需要控制或者操作sqlite3，则需要使用对应的库（lib）-sqlite3</p>
<p>在数据库中，一个完整的数据库操作基本上涵盖以下几个部分，且可以根据实际情况进行裁剪：</p>
<h2 id="2-1-数据库创建"><a href="#2-1-数据库创建" class="headerlink" title="2.1 数据库创建"></a>2.1 数据库创建</h2><p>#创建数据库</p>
<p>#案例为学生信息管理系统</p>
<p>#本意是要加载数据库的，但是如果库文件不存在，则会先新建再使用</p>
<p><code>sqlite3.connect(&#39;student.db&#39;)</code></p>
<p># 在python中，有两个创建方法：</p>
<p># 1是人工手动创建一个空的库文件</p>
<p># 2是通过sqlite3的connect方法完成创建</p>
<p>在python中，2.5以后的版本已经内置了相关支持库，我们只需要引入就可以使用。</p>
<p>在连接加载数据库时，一定要注意文件名必须写正确，如果不正确，则会产生新建操作。</p>
<h2 id="2-2-数据库表的创建"><a href="#2-2-数据库表的创建" class="headerlink" title="2.2 数据库表的创建"></a>2.2 数据库表的创建</h2><p><code>create table tablename（clo type,clo type)</code></p>
<p>例如：</p>
<p><code>create table  userinfo(id int primary key,name text,age int)</code>—-可视化工具中使用</p>
<p>在python中如何执行sql？</p>
<p>1.加载数据库文件，获得连接对象</p>
<p>2.通过加载的连接对象，创建一个游标：cursor（）</p>
<p>3.通过游标对象，去执行sql语句：execute（）</p>
<p>4.提交执行的事务：commit（）</p>
<p>5.关闭连接，将打开的库文件释放掉，以便其他程序的调用</p>
<h2 id="2-3-数据库表的查询操作（select：检索、查询操作）"><a href="#2-3-数据库表的查询操作（select：检索、查询操作）" class="headerlink" title="2.3 数据库表的查询操作（select：检索、查询操作）"></a>2.3 数据库表的查询操作（select：检索、查询操作）</h2><p>在执行查询语句后，python会返回一个结果，循环器，这个里面包含查询所需要获得的记录和相关信息，我们可以通过循环读取的方式，来读取数据。</p>
<p>语法：</p>
<p>select * from tablename where 条件</p>
<p>fetchone(),fetchall()</p>
<p>以上两个函数一定要结合游标来使用才能出结果。</p>
<p>除了以上比较直接获得结果内容以外，还要通过循环游标的循环器来获得每行数据，此时，每行数据为元组类型。</p>
<h2 id="2-4-数据库表的删除操作（delete：删除）"><a href="#2-4-数据库表的删除操作（delete：删除）" class="headerlink" title="2.4 数据库表的删除操作（delete：删除）"></a>2.4 数据库表的删除操作（delete：删除）</h2><p><code>delete from tablename #删除所有</code></p>
<p><code>delete form tablename where 列名=值</code></p>
<p><code>drop也可删除，但需要慎用！能删除数据库和表</code></p>
<p><code>cursor.executemany(sql1,[[&#39;xixi2&#39;],[&#39;xixi3&#39;]])#删除多行</code></p>
<h2 id="2-5-数据库表的更新操作（update：更新）"><a href="#2-5-数据库表的更新操作（update：更新）" class="headerlink" title="2.5 数据库表的更新操作（update：更新）"></a>2.5 数据库表的更新操作（update：更新）</h2><p>update tablename set 字段名=新值 where 列名=值</p>
<h2 id="2-6-数据库库的增加操作（insert：插入）"><a href="#2-6-数据库库的增加操作（insert：插入）" class="headerlink" title="2.6 数据库库的增加操作（insert：插入）"></a>2.6 数据库库的增加操作（insert：插入）</h2><p>插入值的语法为：</p>
<p><code>insert into table values（1,2,3,4）#全匹配插入值</code></p>
<p><code>insert into table(列1，列2，列3） values（值1，值2，值3）#按需插入</code></p>
<p>在python中如何插入？</p>
<p>方法步骤同创建表的步骤，还是那5步，</p>
<p>新增一个方法executemany（），支持通过python批量插入</p>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
      <a href="/2019/10/08/可视化/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption"></strong>
        <div class="article-nav-title">
          
            python爬虫数据可视化
          
        </div>
      </a>
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2019/09/25/python循环语句/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">python·循环语句</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    
<div id="gitmentContainer"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.webp" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        童话十二
      
    </h3>
    <p class="avatar-slogan">
      软工小白菜一枚，网安新晋门童
    </p>
  </div>
</div>


  
    

  
    
  <div class="widget-box">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eigrp，路由协议/">Eigrp，路由协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRE-VPN/">GRE-VPN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IP地址和VLSM（变长子网掩码）/">IP地址和VLSM（变长子网掩码）</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VLNA/">VLNA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlmap/">sqlmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思科/">思科</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渗透/">渗透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渗透，XSS漏洞/">渗透，XSS漏洞</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/热备份路由协议，思科专有/">热备份路由协议，思科专有</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/策略路由/">策略路由</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络，NAT/">网络，NAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络，OSPF/">网络，OSPF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络，QoS/">网络，QoS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路由协议，路由重分/">路由协议，路由重分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/防火墙，安全/">防火墙，安全</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Eigrp，路由协议/" style="font-size: 10px;">Eigrp，路由协议</a> <a href="/tags/GRE-VPN/" style="font-size: 10px;">GRE-VPN</a> <a href="/tags/IP地址和VLSM（变长子网掩码）/" style="font-size: 10px;">IP地址和VLSM（变长子网掩码）</a> <a href="/tags/VLNA/" style="font-size: 10px;">VLNA</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/sqlmap/" style="font-size: 10px;">sqlmap</a> <a href="/tags/思科/" style="font-size: 10px;">思科</a> <a href="/tags/渗透/" style="font-size: 10px;">渗透</a> <a href="/tags/渗透，XSS漏洞/" style="font-size: 10px;">渗透，XSS漏洞</a> <a href="/tags/热备份路由协议，思科专有/" style="font-size: 10px;">热备份路由协议，思科专有</a> <a href="/tags/策略路由/" style="font-size: 10px;">策略路由</a> <a href="/tags/网络，NAT/" style="font-size: 10px;">网络，NAT</a> <a href="/tags/网络，OSPF/" style="font-size: 10px;">网络，OSPF</a> <a href="/tags/网络，QoS/" style="font-size: 10px;">网络，QoS</a> <a href="/tags/路由协议，路由重分/" style="font-size: 10px;">路由协议，路由重分</a> <a href="/tags/防火墙，安全/" style="font-size: 10px;">防火墙，安全</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/18/网络安全法学习重点/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/10/28/XSS漏洞/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/10/25/xss进阶/">XSS进阶</a>
          </li>
        
          <li>
            <a href="/2019/10/16/sqlmap简单使用/">sqlmap简单使用</a>
          </li>
        
          <li>
            <a href="/2019/10/14/渗透测试面试问题集合/">渗透测试面试问题合集</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2019 John Doe &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
  <!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/click.js"></script>
</body>
</html>